{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/ipad-classroom-scheduler/src/lib/db.ts"],"sourcesContent":["import mysql from 'mysql2/promise';\r\n\r\nconst pool = mysql.createPool({\r\n    host: process.env.MYSQL_HOST,\r\n    user: process.env.MYSQL_USER,\r\n    password: process.env.MYSQL_PASSWORD,\r\n    database: process.env.MYSQL_DATABASE,\r\n    waitForConnections: true,\r\n    connectionLimit: 10,\r\n    queueLimit: 0,\r\n});\r\n\r\nexport default pool;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,OAAO,8IAAK,CAAC,UAAU,CAAC;IAC1B,MAAM,QAAQ,GAAG,CAAC,UAAU;IAC5B,MAAM,QAAQ,GAAG,CAAC,UAAU;IAC5B,UAAU,QAAQ,GAAG,CAAC,cAAc;IACpC,UAAU,QAAQ,GAAG,CAAC,cAAc;IACpC,oBAAoB;IACpB,iBAAiB;IACjB,YAAY;AAChB;uCAEe"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///C:/ipad-classroom-scheduler/src/app/api/rooms/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport pool from '@/lib/db';\r\nimport { RowDataPacket } from 'mysql2';\r\n\r\nexport async function GET(request: NextRequest) {\r\n    try {\r\n        const searchParams = request.nextUrl.searchParams;\r\n        const tenantId = searchParams.get('tenant_id') || '1';\r\n        const buildingId = searchParams.get('building_id');\r\n\r\n        let query = `\r\n      SELECT r.*, b.name as building_name, \r\n             d.id as device_id, d.pairing_code, d.last_seen_at\r\n      FROM rooms r\r\n      LEFT JOIN buildings b ON r.building_id = b.id\r\n      LEFT JOIN devices d ON r.id = d.room_id\r\n      WHERE r.tenant_id = ?\r\n    `;\r\n        const params: any[] = [tenantId];\r\n\r\n        if (buildingId) {\r\n            query += ' AND r.building_id = ?';\r\n            params.push(buildingId);\r\n        }\r\n\r\n        query += ' ORDER BY b.name, r.name';\r\n\r\n        const [rows] = await pool.query<RowDataPacket[]>(query, params);\r\n        return NextResponse.json(rows);\r\n    } catch (error) {\r\n        console.error('Error fetching rooms:', error);\r\n        return NextResponse.json({ error: 'Failed to fetch rooms' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,eAAe,IAAI,OAAoB;IAC1C,IAAI;QACA,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;QACjD,MAAM,WAAW,aAAa,GAAG,CAAC,gBAAgB;QAClD,MAAM,aAAa,aAAa,GAAG,CAAC;QAEpC,IAAI,QAAQ,CAAC;;;;;;;IAOjB,CAAC;QACG,MAAM,SAAgB;YAAC;SAAS;QAEhC,IAAI,YAAY;YACZ,SAAS;YACT,OAAO,IAAI,CAAC;QAChB;QAEA,SAAS;QAET,MAAM,CAAC,KAAK,GAAG,MAAM,6HAAI,CAAC,KAAK,CAAkB,OAAO;QACxD,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACJ"}}]
}