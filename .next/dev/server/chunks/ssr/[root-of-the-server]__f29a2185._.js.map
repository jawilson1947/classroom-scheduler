{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/ipad-classroom-scheduler/src/app/admin/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useSession } from 'next-auth/react';\r\nimport { useRouter } from 'next/navigation';\r\nimport useSWR from 'swr';\r\nimport { format } from 'date-fns';\r\n\r\ninterface Tenant {\r\n    id: number;\r\n    uuid: string;\r\n    name: string;\r\n    slug: string;\r\n    time_zone: string;\r\n}\r\n\r\ninterface Building {\r\n    id: number;\r\n    tenant_id: number;\r\n    name: string;\r\n    time_zone: string;\r\n}\r\n\r\ninterface Room {\r\n    id: number;\r\n    name: string;\r\n    building_name: string;\r\n    building_id: number;\r\n    device_id: number | null;\r\n    pairing_code: string | null;\r\n    last_seen_at: string | null;\r\n}\r\n\r\ninterface Event {\r\n    id: number;\r\n    room_id: number;\r\n    title: string;\r\n    facilitator_name: string | null;\r\n    start_time: string;\r\n    end_time: string;\r\n}\r\n\r\nconst fetcher = (url: string) => fetch(url).then((res) => res.json());\r\n\r\nexport default function AdminPage() {\r\n    const { data: session, status } = useSession();\r\n    const router = useRouter();\r\n    const [activeTab, setActiveTab] = useState<'setup' | 'devices' | 'events'>('setup');\r\n    const [showPairingCode, setShowPairingCode] = useState<string | null>(null);\r\n\r\n    // Determine if user is super admin\r\n    const isSuperAdmin = session?.user?.role === 'SYSTEM_ADMIN';\r\n\r\n    // Auto-lock selected tenant based on user role\r\n    const [selectedTenant, setSelectedTenant] = useState<number>(\r\n        session?.user?.tenantId || 1\r\n    );\r\n\r\n    // Update selectedTenant when session loads for non-super admins\r\n    useEffect(() => {\r\n        if (session?.user?.tenantId && !isSuperAdmin) {\r\n            setSelectedTenant(session.user.tenantId);\r\n        }\r\n    }, [session, isSuperAdmin]);\r\n\r\n    // Redirect to login if not authenticated\r\n    useEffect(() => {\r\n        if (status === 'unauthenticated') {\r\n            router.push('/login');\r\n        }\r\n    }, [status, router]);\r\n\r\n    const { data: tenants, mutate: mutateTenants } = useSWR<Tenant[]>(\r\n        status === 'authenticated' && isSuperAdmin ? '/api/tenants' : null,\r\n        fetcher\r\n    );\r\n    const { data: buildings, mutate: mutateBuildings } = useSWR<Building[]>(\r\n        status === 'authenticated' ? `/api/buildings?tenant_id=${selectedTenant}` : null,\r\n        fetcher\r\n    );\r\n    const { data: rooms, mutate: mutateRooms } = useSWR<Room[]>(\r\n        status === 'authenticated' ? `/api/rooms?tenant_id=${selectedTenant}` : null,\r\n        fetcher\r\n    );\r\n    const { data: events, mutate: mutateEvents } = useSWR<Event[]>(\r\n        status === 'authenticated' ? `/api/events?tenant_id=${selectedTenant}` : null,\r\n        fetcher\r\n    );\r\n\r\n    // Show loading while checking auth\r\n    if (status === 'loading') {\r\n        return (\r\n            <div className=\"min-h-screen bg-slate-50 flex items-center justify-center\">\r\n                <div className=\"text-xl text-slate-600\">Loading...</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Don't render if not authenticated\r\n    if (!session) {\r\n        return null;\r\n    }\r\n\r\n    // Form Handlers\r\n    const handleCreateTenant = async (e: React.FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault();\r\n        const formData = new FormData(e.currentTarget);\r\n        try {\r\n            const response = await fetch('/api/tenants', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    name: formData.get('name'),\r\n                    slug: formData.get('slug'),\r\n                    time_zone: formData.get('time_zone'),\r\n                }),\r\n            });\r\n            if (response.ok) {\r\n                mutateTenants();\r\n                e.currentTarget.reset();\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to create tenant:', error);\r\n        }\r\n    };\r\n\r\n    const handleCreateBuilding = async (e: React.FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault();\r\n        const formData = new FormData(e.currentTarget);\r\n        try {\r\n            const response = await fetch('/api/buildings', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    tenant_id: selectedTenant,\r\n                    name: formData.get('name'),\r\n                    time_zone: formData.get('time_zone'),\r\n                }),\r\n            });\r\n            if (response.ok) {\r\n                mutateBuildings();\r\n                e.currentTarget.reset();\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to create building:', error);\r\n        }\r\n    };\r\n\r\n    const handleCreateRoom = async (e: React.FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault();\r\n        const formData = new FormData(e.currentTarget);\r\n        try {\r\n            const response = await fetch('/api/rooms/create', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    tenant_id: selectedTenant,\r\n                    building_id: formData.get('building_id'),\r\n                    name: formData.get('name'),\r\n                    capacity: formData.get('capacity') || null,\r\n                }),\r\n            });\r\n            if (response.ok) {\r\n                mutateRooms();\r\n                e.currentTarget.reset();\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to create room:', error);\r\n        }\r\n    };\r\n\r\n    const handleGeneratePairingCode = async (roomId: number) => {\r\n        try {\r\n            const response = await fetch('/api/device/pair', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ tenant_id: selectedTenant, room_id: roomId }),\r\n            });\r\n            const data = await response.json();\r\n            if (response.ok) {\r\n                setShowPairingCode(data.pairing_code);\r\n                mutateRooms();\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to generate pairing code:', error);\r\n        }\r\n    };\r\n\r\n    const handleCreateEvent = async (e: React.FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault();\r\n        const formData = new FormData(e.currentTarget);\r\n        try {\r\n            const response = await fetch('/api/events', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    tenant_id: selectedTenant,\r\n                    room_id: formData.get('room_id'),\r\n                    title: formData.get('title'),\r\n                    facilitator_name: formData.get('facilitator'),\r\n                    start_time: formData.get('start_time'),\r\n                    end_time: formData.get('end_time'),\r\n                    description: formData.get('description'),\r\n                    event_type: 'class',\r\n                }),\r\n            });\r\n            if (response.ok) {\r\n                mutateEvents();\r\n                e.currentTarget.reset();\r\n            } else {\r\n                const data = await response.json();\r\n                alert(data.error || 'Failed to create event');\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to create event:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-slate-50 p-8\">\r\n            <div className=\"max-w-7xl mx-auto\">\r\n                <h1 className=\"text-4xl font-bold text-slate-900 mb-2\">Classroom Scheduler Admin</h1>\r\n                <p className=\"text-slate-600 mb-8\">Manage your organization, buildings, rooms, and events</p>\r\n\r\n                {/* Tenant Selector - Only for Super Admins */}\r\n                {isSuperAdmin && Array.isArray(tenants) && tenants.length > 0 && (\r\n                    <div className=\"mb-6\">\r\n                        <label className=\"block text-sm font-medium text-slate-700 mb-2\">Current Organization</label>\r\n                        <select\r\n                            value={selectedTenant}\r\n                            onChange={(e) => setSelectedTenant(parseInt(e.target.value))}\r\n                            className=\"px-4 py-2 border border-slate-300 rounded-lg bg-white\"\r\n                        >\r\n                            {tenants.map((tenant) => (\r\n                                <option key={tenant.id} value={tenant.id}>\r\n                                    {tenant.name}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Non-Super Admin - Show current tenant info */}\r\n                {!isSuperAdmin && session?.user && (\r\n                    <div className=\"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                        <p className=\"text-sm text-blue-800\">\r\n                            <span className=\"font-semibold\">Organization:</span> Tenant ID {session.user.tenantId}\r\n                        </p>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Tabs */}\r\n                <div className=\"flex gap-2 mb-6 border-b border-slate-200\">\r\n                    <button\r\n                        onClick={() => setActiveTab('setup')}\r\n                        className={`px-6 py-3 font-medium transition-colors ${activeTab === 'setup'\r\n                                ? 'text-blue-600 border-b-2 border-blue-600'\r\n                                : 'text-slate-600 hover:text-slate-900'\r\n                            }`}\r\n                    >\r\n                        Setup (Tenants, Buildings, Rooms)\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTab('devices')}\r\n                        className={`px-6 py-3 font-medium transition-colors ${activeTab === 'devices'\r\n                                ? 'text-blue-600 border-b-2 border-blue-600'\r\n                                : 'text-slate-600 hover:text-slate-900'\r\n                            }`}\r\n                    >\r\n                        Devices\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTab('events')}\r\n                        className={`px-6 py-3 font-medium transition-colors ${activeTab === 'events'\r\n                                ? 'text-blue-600 border-b-2 border-blue-600'\r\n                                : 'text-slate-600 hover:text-slate-900'\r\n                            }`}\r\n                    >\r\n                        Events\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Setup Tab */}\r\n                {activeTab === 'setup' && (\r\n                    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                        {/* Tenants - Only visible to Super Admin */}\r\n                        {isSuperAdmin && (\r\n                            <div className=\"bg-white rounded-xl shadow p-6\">\r\n                                <h2 className=\"text-xl font-bold text-slate-900 mb-4\">Organizations (Tenants)</h2>\r\n                                <form onSubmit={handleCreateTenant} className=\"space-y-3 mb-4\">\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"name\"\r\n                                        placeholder=\"Organization Name\"\r\n                                        required\r\n                                        className=\"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm\"\r\n                                    />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"slug\"\r\n                                        placeholder=\"Slug (e.g., my-org)\"\r\n                                        required\r\n                                        className=\"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm\"\r\n                                    />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"time_zone\"\r\n                                        placeholder=\"Time Zone (e.g., America/Chicago)\"\r\n                                        required\r\n                                        defaultValue=\"America/Chicago\"\r\n                                        className=\"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm\"\r\n                                    />\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        className=\"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 text-sm font-medium\"\r\n                                    >\r\n                                        Add Organization\r\n                                    </button>\r\n                                </form>\r\n                                <div className=\"space-y-2\">\r\n                                    {Array.isArray(tenants) && tenants.map((tenant) => (\r\n                                        <div key={tenant.id} className=\"p-3 border border-slate-200 rounded-lg text-sm\">\r\n                                            <div className=\"font-semibold\">{tenant.name}</div>\r\n                                            <div className=\"text-slate-500 text-xs\">{tenant.slug}</div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Buildings */}\r\n                        <div className=\"bg-white rounded-xl shadow p-6\">\r\n                            <h2 className=\"text-xl font-bold text-slate-900 mb-4\">Buildings</h2>\r\n                            <form onSubmit={handleCreateBuilding} className=\"space-y-3 mb-4\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"name\"\r\n                                    placeholder=\"Building Name\"\r\n                                    required\r\n                                    className=\"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm\"\r\n                                />\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"time_zone\"\r\n                                    placeholder=\"Time Zone\"\r\n                                    required\r\n                                    defaultValue=\"America/Chicago\"\r\n                                    className=\"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm\"\r\n                                />\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 text-sm font-medium\"\r\n                                >\r\n                                    Add Building\r\n                                </button>\r\n                            </form>\r\n                            <div className=\"space-y-2\">\r\n                                {Array.isArray(buildings) && buildings.map((building) => (\r\n                                    <div key={building.id} className=\"p-3 border border-slate-200 rounded-lg text-sm\">\r\n                                        <div className=\"font-semibold\">{building.name}</div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Rooms */}\r\n                        <div className=\"bg-white rounded-xl shadow p-6\">\r\n                            <h2 className=\"text-xl font-bold text-slate-900 mb-4\">Rooms</h2>\r\n                            <form onSubmit={handleCreateRoom} className=\"space-y-3 mb-4\">\r\n                                <select\r\n                                    name=\"building_id\"\r\n                                    required\r\n                                    className=\"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm\"\r\n                                >\r\n                                    <option value=\"\">Select Building</option>\r\n                                    {Array.isArray(buildings) && buildings.map((building) => (\r\n                                        <option key={building.id} value={building.id}>\r\n                                            {building.name}\r\n                                        </option>\r\n                                    ))}\r\n                                </select>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"name\"\r\n                                    placeholder=\"Room Name\"\r\n                                    required\r\n                                    className=\"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm\"\r\n                                />\r\n                                <input\r\n                                    type=\"number\"\r\n                                    name=\"capacity\"\r\n                                    placeholder=\"Capacity (optional)\"\r\n                                    className=\"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm\"\r\n                                />\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 text-sm font-medium\"\r\n                                >\r\n                                    Add Room\r\n                                </button>\r\n                            </form>\r\n                            <div className=\"space-y-2\">\r\n                                {Array.isArray(rooms) && rooms.map((room) => (\r\n                                    <div key={room.id} className=\"p-3 border border-slate-200 rounded-lg text-sm\">\r\n                                        <div className=\"font-semibold\">{room.name}</div>\r\n                                        <div className=\"text-slate-500 text-xs\">{room.building_name}</div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Devices Tab */}\r\n                {activeTab === 'devices' && (\r\n                    <div className=\"bg-white rounded-xl shadow p-6\">\r\n                        <h2 className=\"text-2xl font-bold text-slate-900 mb-4\">iPad Devices</h2>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                            {Array.isArray(rooms) && rooms.map((room) => (\r\n                                <div key={room.id} className=\"border border-slate-200 rounded-lg p-4\">\r\n                                    <h3 className=\"font-semibold text-lg\">{room.name}</h3>\r\n                                    <p className=\"text-sm text-slate-600 mb-3\">{room.building_name}</p>\r\n                                    {room.device_id ? (\r\n                                        <div>\r\n                                            <div\r\n                                                className={`inline-block px-2 py-1 rounded text-sm ${room.last_seen_at &&\r\n                                                        new Date(room.last_seen_at) > new Date(Date.now() - 5 * 60 * 1000)\r\n                                                        ? 'bg-green-100 text-green-800'\r\n                                                        : 'bg-red-100 text-red-800'\r\n                                                    }`}\r\n                                            >\r\n                                                {room.last_seen_at &&\r\n                                                    new Date(room.last_seen_at) > new Date(Date.now() - 5 * 60 * 1000)\r\n                                                    ? '● Online'\r\n                                                    : '● Offline'}\r\n                                            </div>\r\n                                            <p className=\"text-slate-500 mt-2 text-sm\">Code: {room.pairing_code}</p>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <button\r\n                                            onClick={() => handleGeneratePairingCode(room.id)}\r\n                                            className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm\"\r\n                                        >\r\n                                            Generate Pairing Code\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Events Tab */}\r\n                {activeTab === 'events' && (\r\n                    <div className=\"bg-white rounded-xl shadow p-6\">\r\n                        <div className=\"flex justify-between items-center mb-4\">\r\n                            <h2 className=\"text-2xl font-bold text-slate-900\">Events</h2>\r\n                        </div>\r\n\r\n                        <form onSubmit={handleCreateEvent} className=\"mb-6 p-4 border border-slate-200 rounded-lg bg-slate-50\">\r\n                            <h3 className=\"font-semibold mb-3\">Create New Event</h3>\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-slate-700 mb-1\">Room</label>\r\n                                    <select\r\n                                        name=\"room_id\"\r\n                                        required\r\n                                        className=\"w-full px-3 py-2 border border-slate-300 rounded-lg\"\r\n                                    >\r\n                                        <option value=\"\">Select Room</option>\r\n                                        {Array.isArray(rooms) && rooms.map((room) => (\r\n                                            <option key={room.id} value={room.id}>\r\n                                                {room.name} - {room.building_name}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-slate-700 mb-1\">Title</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"title\"\r\n                                        required\r\n                                        className=\"w-full px-3 py-2 border border-slate-300 rounded-lg\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-slate-700 mb-1\">Facilitator</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"facilitator\"\r\n                                        className=\"w-full px-3 py-2 border border-slate-300 rounded-lg\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-slate-700 mb-1\">Start Time</label>\r\n                                    <input\r\n                                        type=\"datetime-local\"\r\n                                        name=\"start_time\"\r\n                                        required\r\n                                        className=\"w-full px-3 py-2 border border-slate-300 rounded-lg\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-slate-700 mb-1\">End Time</label>\r\n                                    <input\r\n                                        type=\"datetime-local\"\r\n                                        name=\"end_time\"\r\n                                        required\r\n                                        className=\"w-full px-3 py-2 border border-slate-300 rounded-lg\"\r\n                                    />\r\n                                </div>\r\n                                <div className=\"col-span-2\">\r\n                                    <label className=\"block text-sm font-medium text-slate-700 mb-1\">Description</label>\r\n                                    <textarea\r\n                                        name=\"description\"\r\n                                        rows={2}\r\n                                        className=\"w-full px-3 py-2 border border-slate-300 rounded-lg\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                type=\"submit\"\r\n                                className=\"mt-4 bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700\"\r\n                            >\r\n                                Create Event\r\n                            </button>\r\n                        </form>\r\n\r\n                        <div className=\"space-y-3\">\r\n                            {Array.isArray(events) && events.slice(0, 10).map((event) => {\r\n                                const room = rooms?.find((r) => r.id === event.room_id);\r\n                                return (\r\n                                    <div\r\n                                        key={event.id}\r\n                                        className=\"border border-slate-200 rounded-lg p-4 flex justify-between items-center\"\r\n                                    >\r\n                                        <div>\r\n                                            <h3 className=\"font-semibold text-slate-900\">{event.title}</h3>\r\n                                            <p className=\"text-sm text-slate-600\">\r\n                                                {room?.name} • {event.facilitator_name || 'No facilitator'}\r\n                                            </p>\r\n                                        </div>\r\n                                        <div className=\"text-right text-sm text-slate-600\">\r\n                                            <div>{format(new Date(event.start_time), 'MMM d, h:mm a')}</div>\r\n                                            <div>{format(new Date(event.end_time), 'h:mm a')}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Pairing Code Modal */}\r\n            {showPairingCode && (\r\n                <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\">\r\n                    <div className=\"bg-white rounded-2xl p-8 max-w-md w-full\">\r\n                        <h2 className=\"text-2xl font-bold text-slate-900 mb-4\">Pairing Code Generated</h2>\r\n                        <div className=\"bg-slate-100 rounded-lg p-6 text-center mb-6\">\r\n                            <div className=\"text-5xl font-mono font-bold text-blue-600\">{showPairingCode}</div>\r\n                        </div>\r\n                        <p className=\"text-slate-600 mb-6\">\r\n                            Enter this code on the iPad device to pair it with the room.\r\n                        </p>\r\n                        <button\r\n                            onClick={() => setShowPairingCode(null)}\r\n                            className=\"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 font-semibold\"\r\n                        >\r\n                            Close\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}