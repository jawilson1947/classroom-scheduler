(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72906,e=>{"use strict";var t=e.i(43476),s=e.i(71645),l=e.i(83599),a=e.i(1851);let i=e=>fetch(e).then(e=>e.json());function d(){let[e,d]=(0,s.useState)(null),[r,n]=(0,s.useState)(!1),[o,c]=(0,s.useState)(null),{data:m,mutate:x}=(0,l.default)("/api/rooms?tenant_id=1",i),{data:h,mutate:b}=(0,l.default)("/api/events?tenant_id=1",i),u=async e=>{try{let t=await fetch("/api/device/pair",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenant_id:1,room_id:e})}),s=await t.json();t.ok&&(c(s.pairing_code),x())}catch(e){console.error("Failed to generate pairing code:",e)}},p=async t=>{t.preventDefault();let s=new FormData(t.currentTarget);try{let l=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenant_id:1,room_id:e,title:s.get("title"),facilitator_name:s.get("facilitator"),start_time:s.get("start_time"),end_time:s.get("end_time"),description:s.get("description"),event_type:"class"})});if(l.ok)b(),n(!1),t.currentTarget.reset();else{let e=await l.json();alert(e.error||"Failed to create event")}}catch(e){console.error("Failed to create event:",e)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-slate-50 p-8",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-8",children:"Classroom Scheduler Admin"}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Rooms & Devices"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m?.map(e=>(0,t.jsxs)("div",{className:"border border-slate-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg text-slate-900",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-slate-600",children:e.building_name}),e.device_id?(0,t.jsxs)("div",{className:"mt-3 text-sm",children:[(0,t.jsx)("div",{className:`inline-block px-2 py-1 rounded ${e.last_seen_at&&new Date(e.last_seen_at)>new Date(Date.now()-3e5)?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.last_seen_at&&new Date(e.last_seen_at)>new Date(Date.now()-3e5)?"● Online":"● Offline"}),(0,t.jsxs)("p",{className:"text-slate-500 mt-1",children:["Code: ",e.pairing_code]})]}):(0,t.jsx)("button",{onClick:()=>u(e.id),className:"mt-3 text-sm bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700",children:"Generate Pairing Code"})]},e.id))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Events"}),(0,t.jsx)("button",{onClick:()=>n(!r),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:r?"Cancel":"New Event"})]}),r&&(0,t.jsxs)("form",{onSubmit:p,className:"mb-6 p-4 border border-slate-200 rounded-lg bg-slate-50",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Room"}),(0,t.jsxs)("select",{name:"room_id",required:!0,onChange:e=>d(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-slate-300 rounded-lg",children:[(0,t.jsx)("option",{value:"",children:"Select Room"}),m?.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," - ",e.building_name]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Title"}),(0,t.jsx)("input",{type:"text",name:"title",required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Facilitator"}),(0,t.jsx)("input",{type:"text",name:"facilitator",className:"w-full px-3 py-2 border border-slate-300 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Start Time"}),(0,t.jsx)("input",{type:"datetime-local",name:"start_time",required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"End Time"}),(0,t.jsx)("input",{type:"datetime-local",name:"end_time",required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg"})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),(0,t.jsx)("textarea",{name:"description",rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg"})]})]}),(0,t.jsx)("button",{type:"submit",className:"mt-4 bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700",children:"Create Event"})]}),(0,t.jsx)("div",{className:"space-y-3",children:h?.slice(0,10).map(e=>{let s=m?.find(t=>t.id===e.room_id);return(0,t.jsxs)("div",{className:"border border-slate-200 rounded-lg p-4 flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-slate-900",children:e.title}),(0,t.jsxs)("p",{className:"text-sm text-slate-600",children:[s?.name," • ",e.facilitator_name||"No facilitator"]})]}),(0,t.jsxs)("div",{className:"text-right text-sm text-slate-600",children:[(0,t.jsx)("div",{children:(0,a.format)(new Date(e.start_time),"MMM d, h:mm a")}),(0,t.jsx)("div",{children:(0,a.format)(new Date(e.end_time),"h:mm a")})]})]},e.id)})})]})]}),o&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Pairing Code Generated"}),(0,t.jsx)("div",{className:"bg-slate-100 rounded-lg p-6 text-center mb-6",children:(0,t.jsx)("div",{className:"text-5xl font-mono font-bold text-blue-600",children:o})}),(0,t.jsx)("p",{className:"text-slate-600 mb-6",children:"Enter this code on the iPad device to pair it with the room."}),(0,t.jsx)("button",{onClick:()=>c(null),className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 font-semibold",children:"Close"})]})})]})}e.s(["default",()=>d])}]);