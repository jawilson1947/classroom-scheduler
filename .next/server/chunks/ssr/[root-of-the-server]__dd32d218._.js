module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},10179,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(72596),e=a.i(56711);let f=a=>fetch(a).then(a=>a.json());function g(){let[a,g]=(0,c.useState)(null),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(null),{data:l,mutate:m}=(0,d.default)("/api/rooms?tenant_id=1",f),{data:n,mutate:o}=(0,d.default)("/api/events?tenant_id=1",f),p=async a=>{try{let b=await fetch("/api/device/pair",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenant_id:1,room_id:a})}),c=await b.json();b.ok&&(k(c.pairing_code),m())}catch(a){console.error("Failed to generate pairing code:",a)}},q=async b=>{b.preventDefault();let c=new FormData(b.currentTarget);try{let d=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenant_id:1,room_id:a,title:c.get("title"),facilitator_name:c.get("facilitator"),start_time:c.get("start_time"),end_time:c.get("end_time"),description:c.get("description"),event_type:"class"})});if(d.ok)o(),i(!1),b.currentTarget.reset();else{let a=await d.json();alert(a.error||"Failed to create event")}}catch(a){console.error("Failed to create event:",a)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-slate-50 p-8",children:[(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-8",children:"Classroom Scheduler Admin"}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Rooms & Devices"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l?.map(a=>(0,b.jsxs)("div",{className:"border border-slate-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg text-slate-900",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-slate-600",children:a.building_name}),a.device_id?(0,b.jsxs)("div",{className:"mt-3 text-sm",children:[(0,b.jsx)("div",{className:`inline-block px-2 py-1 rounded ${a.last_seen_at&&new Date(a.last_seen_at)>new Date(Date.now()-3e5)?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.last_seen_at&&new Date(a.last_seen_at)>new Date(Date.now()-3e5)?"● Online":"● Offline"}),(0,b.jsxs)("p",{className:"text-slate-500 mt-1",children:["Code: ",a.pairing_code]})]}):(0,b.jsx)("button",{onClick:()=>p(a.id),className:"mt-3 text-sm bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700",children:"Generate Pairing Code"})]},a.id))})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Events"}),(0,b.jsx)("button",{onClick:()=>i(!h),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:h?"Cancel":"New Event"})]}),h&&(0,b.jsxs)("form",{onSubmit:q,className:"mb-6 p-4 border border-slate-200 rounded-lg bg-slate-50",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Room"}),(0,b.jsxs)("select",{name:"room_id",required:!0,onChange:a=>g(parseInt(a.target.value)),className:"w-full px-3 py-2 border border-slate-300 rounded-lg",children:[(0,b.jsx)("option",{value:"",children:"Select Room"}),l?.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.name," - ",a.building_name]},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Title"}),(0,b.jsx)("input",{type:"text",name:"title",required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Facilitator"}),(0,b.jsx)("input",{type:"text",name:"facilitator",className:"w-full px-3 py-2 border border-slate-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Start Time"}),(0,b.jsx)("input",{type:"datetime-local",name:"start_time",required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"End Time"}),(0,b.jsx)("input",{type:"datetime-local",name:"end_time",required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg"})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),(0,b.jsx)("textarea",{name:"description",rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg"})]})]}),(0,b.jsx)("button",{type:"submit",className:"mt-4 bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700",children:"Create Event"})]}),(0,b.jsx)("div",{className:"space-y-3",children:n?.slice(0,10).map(a=>{let c=l?.find(b=>b.id===a.room_id);return(0,b.jsxs)("div",{className:"border border-slate-200 rounded-lg p-4 flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-slate-900",children:a.title}),(0,b.jsxs)("p",{className:"text-sm text-slate-600",children:[c?.name," • ",a.facilitator_name||"No facilitator"]})]}),(0,b.jsxs)("div",{className:"text-right text-sm text-slate-600",children:[(0,b.jsx)("div",{children:(0,e.format)(new Date(a.start_time),"MMM d, h:mm a")}),(0,b.jsx)("div",{children:(0,e.format)(new Date(a.end_time),"h:mm a")})]})]},a.id)})})]})]}),j&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Pairing Code Generated"}),(0,b.jsx)("div",{className:"bg-slate-100 rounded-lg p-6 text-center mb-6",children:(0,b.jsx)("div",{className:"text-5xl font-mono font-bold text-blue-600",children:j})}),(0,b.jsx)("p",{className:"text-slate-600 mb-6",children:"Enter this code on the iPad device to pair it with the room."}),(0,b.jsx)("button",{onClick:()=>k(null),className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 font-semibold",children:"Close"})]})})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__dd32d218._.js.map